(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{136:function(e,t,a){"use strict";a.r(t);var n=a(48),r=a(8),l=a(44),o=a.n(l),c=function(e){return{type:"LOADING_ITEMS",payload:e}},u=function(e){return{type:"ERROR_ITEMS",payload:e}},i=function(e){return{type:"CHANGE_PAGE",payload:e}},m=function(e){return function(t){t(c(!0)),fetch("/api/all/".concat(50,"/",e)).then(function(e){if(!e.ok)throw new Error("error getting items");return e.json()}).then(function(e){t({type:"SET_AMOUNT",payload:e.count}),t({type:"GET_ITEMS",payload:e.rows})}).catch(function(e){t(u(e)),o.a.error(e)}).finally(function(){return t(c(!1))})}},E=function(e){return function(t){var a={headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify(e)};fetch("/api/add",a).then(function(a){if(!a.ok)throw new Error("Error adding items");t(function(e){return{type:"ADD_ITEM",payload:e}}(e)),o.a.success("Added")}).catch(function(e){t(u(e)),o.a.error(e)})}},f=function(e){return function(t){var a={method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)};fetch("/api/edit/".concat(e.id),a).then(function(a){if(!a.ok)throw new Error("Error while editing item");t(function(e){return{type:"EDIT_ITEM",payload:e}}(e)),o.a.success("Changed")}).catch(function(e){t(u(e)),o.a.error(e)})}},d=function(e){return function(t){fetch("/api/remove/".concat(e),{method:"DELETE"}).then(function(a){if(!a.ok)throw new Error("Error while deleting item");t(function(e){return{type:"DELETE_ITEM",payload:e}}(e)),o.a.success("Removed")}).catch(function(e){t(u(e.toString())),o.a.error(e)})}},s=function(e,t,a){return function(n){var r={method:"PUT",body:a};fetch("/api/upload/".concat(e),r).then(function(a){if(!a.ok)throw new Error("Error while changing image");n(function(e,t){return{type:"CHANGE_IMAGE",payload:{id:e,file:t}}}(e,t)),o.a.success("Image changed")}).catch(function(e){n(u(e.toString())),o.a.error(e)})}},p=function(e,t){return function(a){fetch("/api/removeupload/".concat(t),{method:"PUT"}).then(function(t){if(!t.ok)throw new Error("error deleting image");a(function(e){return{type:"DELETE_IMAGE",payload:e}}(e)),o.a.success("Image removed")}).catch(function(e){a(u(e.toString())),o.a.error(e)})}},h=a(134),g=a(0),y=a.n(g),v=a(100),C=a(101),I=a(68),b=a(118),k=a(110),w=a(105),S=a(135),T=a(133),D=a(21),O=a(139),A=function(e){for(var t=[],a=1;a<=Math.ceil(e.count/50);a++)t.push(a);var n=t[t.length-1],r=function(a){if(a>t.length||a<t[0])return!1;e.changePage(a)};return y.a.createElement(O.a,null,y.a.createElement(O.a.First,{onClick:function(){return r(1)}}),y.a.createElement(O.a.Prev,{onClick:function(){return r(e.page-1)}}),t.map(function(t){return y.a.createElement(O.a.Item,{active:e.page===t,key:t,onClick:function(){return r(t)}},t)}),y.a.createElement(O.a.Next,{onClick:function(){return r(e.page+1)}}),y.a.createElement(O.a.Last,{onClick:function(){return r(n)}}))},j=function(e){var t=y.a.useState(!1),a=Object(h.a)(t,2),n=a[0],r=a[1],l=y.a.useState(!1),o=Object(h.a)(l,2),c=o[0],u=o[1],i=y.a.useState(!1),m=Object(h.a)(i,2),E=m[0],f=m[1],d=y.a.useState(null),s=Object(h.a)(d,2),p=s[0],g=s[1],O=y.a.useState(""),j=Object(h.a)(O,2),G=j[0],L=j[1],N=y.a.useState(""),P=Object(h.a)(N,2),x=P[0],M=P[1],_=y.a.useState(""),H=Object(h.a)(_,2),B=H[0],F=H[1],U=y.a.useState(null),R=Object(h.a)(U,2),z=R[0],J=R[1],Y=y.a.useState(null),W=Object(h.a)(Y,2),$=W[0],q=W[1],K=y.a.useState(""),Q=Object(h.a)(K,2),V=Q[0],X=Q[1],Z=y.a.useState(""),ee=Object(h.a)(Z,2),te=ee[0],ae=ee[1];y.a.useEffect(function(){e.getItemsList(e.page)},[e.page]);var ne=function(e){e&&e.preventDefault(),r(!1),u(!1),f(!1)};return e.loadingItems?y.a.createElement(D.a,null):e.items.length?y.a.createElement(y.a.Fragment,null,y.a.createElement(b.a,{variant:"outline-success",size:"lg",block:!0,onClick:function(e){return function(e){e.preventDefault(),g(null),L(""),M(""),F(""),J(null),u(!0)}(e)}},"ADD NEW"),y.a.createElement(k.a,{className:"my-4"},e.items.map(function(t,a){return y.a.createElement(w.a,null,y.a.createElement(v.a,null,y.a.createElement(C.a,{className:"align-items-center"},y.a.createElement(I.a,{sm:12,md:6,lg:7,xl:8},y.a.createElement("b",null,t.title),", ",y.a.createElement("i",null,t.author,", ",t.bookyear)," ",t.price?" --- $"+t.price:""),y.a.createElement(I.a,{sm:12,md:6,lg:5,xl:4},y.a.createElement(b.a,{disabled:!t.id,size:"sm",onClick:function(a){return function(t,a){t.preventDefault(),e.deleteItem(a)}(a,t.id)},key:a,variant:"outline-danger",className:"ml-1 float-right"},"Remove"),y.a.createElement(b.a,{disabled:!t.id,onClick:function(e){return function(e,t){e.preventDefault(),g(t.id),L(t.title),M(t.author),F(t.bookyear),J(t.price),r(!0)}(e,t)},key:a,variant:"outline-warning",size:"sm",className:"float-right"},"Edit"),y.a.createElement(b.a,{disabled:!t.id,onClick:function(e){return function(e,t,a){e.preventDefault(),q(t),ae(a),X(a),f(!0)}(e,t.id,t.fileUrl)},key:a,variant:"outline-primary",size:"sm",className:"mr-1 float-right"},t.fileUrl?"Change Image":"Add Image")))))})),y.a.createElement(C.a,{className:"justify-content-center"},y.a.createElement(A,{count:e.count,changePage:e.changePage,page:e.page})),y.a.createElement(S.a,{centered:!0,show:n,onHide:ne},y.a.createElement(S.a.Header,{closeButton:!0},y.a.createElement(S.a.Title,null,'Change "',G,'"')),y.a.createElement(S.a.Body,null,y.a.createElement(T.a,null,y.a.createElement(T.a.Group,{controlId:"title"},y.a.createElement(T.a.Label,null,"Title"),y.a.createElement(T.a.Control,{type:"text",name:"title",value:G,onChange:function(e){return L(e.target.value)},placeholder:"Enter Title"})),y.a.createElement(T.a.Group,{controlId:"author"},y.a.createElement(T.a.Label,null,"Author"),y.a.createElement(T.a.Control,{type:"text",name:"author",value:x,onChange:function(e){return M(e.target.value)},placeholder:"Enter Author"})),y.a.createElement(T.a.Group,{controlId:"year"},y.a.createElement(T.a.Label,null,"Year"),y.a.createElement(T.a.Control,{type:"text",name:"year",value:B,onChange:function(e){return F(e.target.value)},placeholder:"Enter Year"})),y.a.createElement(T.a.Group,{controlId:"price"},y.a.createElement(T.a.Label,null,"Price"),y.a.createElement(T.a.Control,{type:"text",name:"price",value:z,onChange:function(e){return J(e.target.value)},placeholder:"Enter Price"})))),y.a.createElement(S.a.Footer,null,y.a.createElement(b.a,{variant:"secondary",onClick:function(e){return ne(e)}},"Close"),y.a.createElement(b.a,{variant:"primary",onClick:function(t){return function(t){t&&t.preventDefault();var a={id:p,title:G,author:x,bookyear:B,price:z};e.changeItem(a),r(!1)}(t)}},"Save"))),y.a.createElement(S.a,{centered:!0,show:c,onHide:ne},y.a.createElement(S.a.Header,{closeButton:!0},y.a.createElement(S.a.Title,null,"Add new")),y.a.createElement(S.a.Body,null,y.a.createElement(T.a,null,y.a.createElement(T.a.Group,{controlId:"title"},y.a.createElement(T.a.Label,null,"Title"),y.a.createElement(T.a.Control,{type:"text",name:"title",value:G,onChange:function(e){return L(e.target.value)},placeholder:"Enter Title"})),y.a.createElement(T.a.Group,{controlId:"author"},y.a.createElement(T.a.Label,null,"Author"),y.a.createElement(T.a.Control,{type:"text",name:"author",value:x,onChange:function(e){return M(e.target.value)},placeholder:"Enter Author"})),y.a.createElement(T.a.Group,{controlId:"year"},y.a.createElement(T.a.Label,null,"Year"),y.a.createElement(T.a.Control,{type:"text",name:"year",value:B,onChange:function(e){return F(e.target.value)},placeholder:"Enter Year"})),y.a.createElement(T.a.Group,{controlId:"price"},y.a.createElement(T.a.Label,null,"Price"),y.a.createElement(T.a.Control,{type:"text",name:"price",value:z,onChange:function(e){return J(e.target.value)},placeholder:"Enter Price"})))),y.a.createElement(S.a.Footer,null,y.a.createElement(b.a,{variant:"secondary",onClick:function(e){return ne(e)}},"Close"),y.a.createElement(b.a,{variant:"primary",onClick:function(t){return function(t){t&&t.preventDefault();var a={title:G,author:x,bookyear:B,price:z};e.addItem(a),u(!1)}(t)}},"Save"))),y.a.createElement(S.a,{centered:!0,show:E,onHide:ne},y.a.createElement(S.a.Header,{closeButton:!0},y.a.createElement(S.a.Title,null,"Add new Image")),y.a.createElement(S.a.Body,null,y.a.createElement(T.a,null,""!==V&&null!==V&&void 0!==V?y.a.createElement("img",{alt:V,width:"100%",height:"100%",className:"mb-2",src:"/uploads/"+V}):null,y.a.createElement(T.a.Group,null,y.a.createElement(T.a.Control,{type:"file",onChange:function(t){return function(t){var a=new FormData,n=Date.now()+"-"+t.target.files[0].name;a.append("name",n),a.append("image",t.target.files[0]),e.imageChange($,n,a)}(t)}})))),y.a.createElement(S.a.Footer,null,y.a.createElement(b.a,{variant:"secondary",onClick:function(e){return ne(e)}},"Close"),y.a.createElement(b.a,{variant:"danger",onClick:function(t){return function(t){t.preventDefault(),e.removeImage($,te)}(t)}},"Delete")))):y.a.createElement(v.a,null,y.a.createElement(C.a,null,y.a.createElement(I.a,null,"Have no items")))},G=Object(n.b)(function(e){return{loadingItems:e.itemsState.loadingItems,errorItems:e.itemsState.errorItems,items:e.itemsState.items,count:e.itemsState.amount,page:e.itemsState.page}},function(e){return Object(r.bindActionCreators)({getItemsList:m,addItem:E,changeItem:f,deleteItem:d,imageChange:s,removeImage:p,changePage:i},e)})(j);t.default=G}}]);
//# sourceMappingURL=6.3bde30e0.chunk.js.map